@using System.Security.Claims;

@{
Layout = "_LayoutChat";
}
<head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<!-- Layout -->





<!-- Layout -->

@section Scripts{
    <link rel="stylesheet" href="/css/styles-light.min.css"/>
    <script src="/js/signalr.min.js"></script>
    <script>
        const cn = new signalR.HubConnectionBuilder().withUrl("/chathub").build();
        cn.start().then(function () {
            var i = "@User.FindFirstValue(ClaimTypes.NameIdentifier)";
            cn.invoke("JoinGroup", i).catch(function (err) {
                return console.error(err.toString());
            });
        }).catch(function (err) {
            return console.error(err.toString());
        });
        cn.on("SendMessage", function (user, message) {
            console.log(user + " says " + message);
        });
    </script>
}