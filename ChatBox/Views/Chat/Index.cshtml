@using System.Security.Claims;

@{
Layout = "_LayoutChat";
}
<head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<!-- Layout -->





<!-- Layout -->

@section Scripts{
    <link rel="stylesheet" href="/css/styles-light.min.css"/>
    <script src="/js/signalr.min.js"></script>
    <script>
        //const cn = new signalR.HubConnectionBuilder().withUrl("/chathub").build();
        //cn.start().then(function () {
        //    var i = "@User.FindFirstValue(ClaimTypes.NameIdentifier)";
        //    cn.invoke("JoinGroup", i).catch(function (err) {
        //        return console.error(err.toString());
        //    });
        //}).catch(function (err) {
        //    return console.error(err.toString());
        //});
        //cn.on("SendMessage", function (user, message) {
        //    console.log(user + " says " + message);
        //});
        //cn.on("Creategroup", (o,n, u) => {
        //    //console.log(i);
        //    $(rsContact).append(`
        //                    <li lt="${o.lastTimeActive}" class="card contact-item active mb-3">
        //                                <a id="chatbox" class="contact-link" href="/Chat/Chat?t=${o.convId}"></a>
        //                        <div class="card-body">
        //                            <div class="d-flex align-items-center">
        //                                <div class="avatar avatar-online me-4">
        //                                    <img class="avatar-img" src="/img/${o.avatar}" alt="Image description">
        //                                </div>
        //                                <div class="flex-grow-1 overflow-hidden">
        //                                    <div class="d-flex align-items-center mb-1">
        //                                                <h5 class="text-truncate mb-0 me-auto">${u == '@User.FindFirstValue(ClaimTypes.NameIdentifier)' ? n[0] : n[1]}</h5>
        //                                                <p class="small text-muted text-nowrap ms-4 mb-0">${o.messageDate}</p>
        //                                    </div>
        //                                    <div class="d-flex align-items-center">
        //                                                <div id="cntChat" class="line-clamp me-auto">
                                                    
        //                                        </div>
        //                                                <span id="countChat" class="badge rounded-pill bg-primary ms-2">2</span>
        //                                    </div>
        //                                </div>
        //                            </div>
        //                        </div>
        //                    </li>
        //            `);
        //});
    </script>
}